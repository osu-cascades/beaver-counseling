<style>
  h1, h2 {
    margin-bottom: 0px !important;
  }

  p {
    line-height: 80% !important;
  }

  @media print {
    #hide1 {
      display: none;
    }

    nav {
      display: none;
    }

    #pdf {
      display: block !important;
      visibility: visible !important;
    }
  }
</style>

<div id="hide1" style="text-align: center;">
<h1>Editing Client</h1>
<%= form_for(@client, local: true) do |form| %>
  <% if (current_user.admin?) %>
    <div class="field">
      <%= form.label :counselor_id %>
      <%= form.select :counselor_id, @users.collect { |user| [user.email, user.id] } %>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :first_name %>
    <%= form.text_field :first_name, id: :client_first_name %>
  </div>

  <div class="field">
    <%= form.label :last_name %>
    <%= form.text_field :last_name, id: :client_last_name %>
  </div>

  <div class="field">
    <%= form.label :dob %>
    <%= form.datetime_select :dob, id: :client_dob %>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :phone_number %>
    <%= form.text_field :phone_number, id: :client_phone_number %>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :leave_message %>
    <%= form.check_box :leave_message, id: :client_leave_message %>
  </div>

  <div class="field">
    <%= form.label :email %>
    <%= form.text_field :email, id: :client_email %>
  </div>

  <div class="field">
    <%= form.label :occupation %>
    <%= form.text_field :occupation, id: :client_occupation %>
  </div>

  <div class="field">
    <%= form.label :employer %>
    <%= form.text_field :employer, id: :client_employer %>
  </div>

  <div class="field">
    <%= form.label :employer_address %>
    <%= form.text_field :employer_address, id: :client_employer_address %>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :work_phone %>
    <%= form.text_field :work_phone, id: :client_work_phone %>
  </div>

  <div class="field" style="display: inline-block;">
    <%= form.label :leave_message_work %>
    <%= form.check_box :leave_message_work, id: :client_leave_message_work %>
  </div>

  <hr>

  <div class="field">
    <%= form.label :Partner_first_name %>
    <%= form.text_field :spouse_first_name, id: :client_spouse_first_name %>
  </div>

  <div class="field">
    <%= form.label :Partner_last_name %>
    <%= form.text_field :spouse_last_name, id: :client_spouse_last_name %>
  </div>

  <div class="field">
    <%= form.label :Partner_dob %>
    <%= form.datetime_select :spouse_dob, id: :client_spouse_dob %>
  </div>

  <div class="field">
    <%= form.label :Partner_occupation %>
    <%= form.text_field :spouse_occupation, id: :client_spouse_occupation %>
  </div>

  <div class="field">
    <%= form.label :Partner_employer %>
    <%= form.text_field :spouse_employer, id: :client_spouse_employer %>
  </div>

  <div class="field">
    <%= form.label :Partner_phone %>
    <%= form.text_field :spouse_phone, id: :client_spouse_phone %>
  </div>

  <hr>

  <% @client = Client.find(params[:id]) %>
    <%= form.fields_for :family_members do |family_member_form| %>
      <p>
        Name: <%= family_member_form.text_field :name %>
        Age: <%= family_member_form.text_field :age %>
        Dob: <%= family_member_form.text_field :dob %>
        Relation: <%= family_member_form.text_field :relation %>

        <%= family_member_form.check_box :_destroy %>
        <%= family_member_form.label :_destroy, "Remove Family Member" %>
      </p>
    <% end %>

  <hr>

  <div class="field">
    <%= form.label :emergency_name %>
    <%= form.text_field :emergency_name, id: :client_emergency_name %>
  </div>

  <div class="field">
    <%= form.label :emergency_relation %>
    <%= form.text_field :emergency_relation, id: :client_emergency_relation %>
  </div>

  <div class="field">
    <%= form.label :emergency_address %>
    <%= form.text_field :emergency_address, id: :client_emergency_address %>
  </div>

  <div class="field">
    <%= form.label :emergency_phone %>
    <%= form.text_field :emergency_phone, id: :client_emergency_phone %>
  </div>

  <div class="field">
    <%= form.label :health_insurance %>
    <%= form.check_box :health_insurance, id: :client_health_insurance %>
  </div>

  <div class="field">
    <%= form.label :insurance_company %>
    <%= form.text_field :insurance_company, id: :client_insurance_company %>
  </div>

  <hr>

  <div class="field">
    <%= form.label :physician %>
    <%= form.text_field :physician, id: :client_physician %>
  </div>

  <div class="field">
    <%= form.label :physician_phone %>
    <%= form.text_field :physician_phone, id: :client_physician_phone %>
  </div>

  <div class="field">
    <%= form.label :medication %>
    <%= form.text_field :medication, id: :client_medication %>
  </div>

  <div class="field">
    <%= form.label :counselor_seen_before %>
    <%= form.check_box :counselor_seen_before, id: :client_counselor_seen_before %>
  </div>

  <div class="field">
    <%= form.label :counselor_seen %>
    <%= form.text_field :counselor_seen, id: :client_counselor_seen %>
  </div>

  <div class="field">
    <%= form.label :help_reason %>
    <%= form.text_field :help_reason, id: :client_help_reason %>
  </div>

  <div class="field">
  <table class="table">
  <thead>
      <tr>
        <th>Previous Counselors</th>     
     </tr>
  </thead>
  <tbody>
     <% @client.previous_counselor.each do |item|%>
     <tr>
        <th><%= item %></th>  
     </tr>
     <% end %>
  </tbody>
  </table>
  </div>

  <div class="actions">
    <%= form.submit "Submit" %>
  </div>

<% end %>

<%= link_to 'Show', @client %> |
<%= link_to 'Back', clients_path %>
<button onclick="printin()">PDF</button>
</div>

<script>
  function printin() {
    window.print();
  }
</script>

<div id="pdf" style="display: none;">
  <strong>
    <h2 style="text-align: center"> OSU Cascades Counseling Practicum</h2>
    <h2 style="text-align: center"> Client Information Sheet</h2>
  </strong>
  <div style="border: 1px solid black; padding: 10px;">
    <p>Date: <u><%= @client.updated_at %></u></p>
    <p>Client name: <u><%= @client.to_s %></u>   Age:<u><%= @client.age %></u>   Date of Birth: <u><%= @client.dob %></u></p>
    <p>Local address: <u>Need an address here</u></p>
    <p>Phone: <u><%= @client.phone_number %></u> Message: Yes No   Email: <u><%= @client.email %></u></p>
    <p>Employer's address: <u><%= @client.employer_address %></u>  Work Phone: <u><%= @client.work_phone %></u>  Message Yes No</p>
  </div>
  <div>
  <h2>Partner Information</h2>
  </div>
  <div style="border:1px solid black; padding: 10px;">
    <p>Name: <u><%= @client.spouse_first_name %> <%= @client.spouse_last_name %></u> Age: <u><%= @client.spouse_dob %></u> </p>
    <p>Occupation: <u><%= @client.spouse_occupation %></u>  Employer:<u><%= @client.spouse_employer %></u> Phone: <u><%= @client.spouse_phone %></u></p>
  </div>
  <h2>Other Members of Your Household</h2>
  <div style="border:1px solid black; padding: 10px;">
      <% @family_member.each do |family| %>
        <% if family.id == @client.id %>
          <p>Name: <u><% family.name %></u></p>
        <% end %>
      <% end %>
  </div>
  <h2>Emergency Contact</h2>
  <div style="border:1px solid black; padding: 10px;">
    <p>Name: <u><%= @client.emergency_name %></u>  Relation: <u><%= @client.emergency_relation %></u></p>
    <p>Address: <u><%= @client.employer_address %></u>  Phone: <u><%= @client.emergency_phone %></u></p>
  </div>
  <h2>Health Insurance</h2>
  <div style="border:1px solid black; padding: 10px;">
    <p>Do you have health insurance? yes No. If yes, what company? <u><%= @client.insurance_company %></u></p>
  </div>
  <h2>Medical Information</h2>
  <div style="border:1px solid black; padding: 10px;">
    <p>Primary Care Physician (PCP) <u><%= @client.physician %></u>  Phone: <u><%= @client.physician_phone %></u></p>
    <p>Prescription Medications: <u><%= @client.medication %></u></p>
    <p>Have you ever seen a counselor before? Yes No. If yes, where and when? <u><%= @client.counselor_seen %></u></p>
    <p>Reason for seeking help now? <u><%= @client.help_reason %></u></p>
  </div>
</div>